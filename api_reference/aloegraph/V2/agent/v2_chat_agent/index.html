
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Schema-driven workflow engine for managing refinable tasks and agent orchestration">
      
      
        <meta name="author" content="AloeCraft.org (Michael Godfrey)">
      
      
      
        <link rel="prev" href="../">
      
      
        <link rel="next" href="../v2_chat_model/">
      
      
        
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>V2 chat agent - AloeGraph API Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#aloegraph.V2.agent.v2_chat_agent" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="AloeGraph API Documentation" class="md-header__button md-logo" aria-label="AloeGraph API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AloeGraph API Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              V2 chat agent
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="AloeGraph API Documentation" class="md-nav__button md-logo" aria-label="AloeGraph API Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    AloeGraph API Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Api reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Api reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1_1" id="__nav_1_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Aloegraph
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Aloegraph
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../aloe_config/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aloe config
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../aloe_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Aloe graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_1_4" id="__nav_1_1_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    V2
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_1_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    V2
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../response_generator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Response generator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../v2_aloe_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 aloe graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../v2_base_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 base model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../v2_base_response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 base response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_4_6" checked>
        
          
          <label class="md-nav__link" for="__nav_1_1_4_6" id="__nav_1_1_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Agent
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_1_4_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agent
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    V2 chat agent
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 chat agent
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        v2_chat_agent
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--v2_chat_agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        v2_chat_agent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v2_chat_agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--mermaid-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mermaid Diagram
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent" class="md-nav__link">
    <span class="md-ellipsis">
      
        ChatAgent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChatAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_chat_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 chat model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_intake_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 intake agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_intake_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 intake model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_intake_response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 intake response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_refinement_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 refinement agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_refinement_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 refinement model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_refinement_response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 refinement response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_router_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 router agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_router_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 router model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../v2_router_response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 router response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_4_6_13" >
        
          
          <label class="md-nav__link" for="__nav_1_1_4_6_13" id="__nav_1_1_4_6_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Example
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_1_1_4_6_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_4_6_13">
            <span class="md-nav__icon md-icon"></span>
            
  
    Example
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example/v2_echo_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 echo agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../example/v2_echo_response/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 echo response
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_4_7" >
        
          
          <label class="md-nav__link" for="__nav_1_1_4_7" id="__nav_1_1_4_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Exception
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_1_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_4_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Exception
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exception/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../exception/base_exceptions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base exceptions
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_4_8" >
        
          
          <label class="md-nav__link" for="__nav_1_1_4_8" id="__nav_1_1_4_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Graph
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_1_1_4_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_4_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Graph
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graph/v2_aloe_node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 aloe node
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graph/v2_aloe_node_graph/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 aloe node graph
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../graph/v2_aloe_route/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    V2 aloe route
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_1_5" id="__nav_1_1_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Agent
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Agent
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../agent/simple_gemini_chat_agent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Simple gemini chat agent
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_1_6" id="__nav_1_1_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dialog
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dialog
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dialog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../dialog/notebook_chat_dialog/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Notebook chat dialog
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_1_7" id="__nav_1_1_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Model
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Model
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../model/base_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Base model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../model/response_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Response model
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_1_8" >
        
          
          <label class="md-nav__link" for="__nav_1_1_8" id="__nav_1_1_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Node
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_1_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Node
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../node/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../node/refinement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Refinement
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        v2_chat_agent
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--v2_chat_agent" class="md-nav__link">
    <span class="md-ellipsis">
      
        v2_chat_agent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="v2_chat_agent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        Overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--integration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Integration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent--mermaid-diagram" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mermaid Diagram
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent" class="md-nav__link">
    <span class="md-ellipsis">
      
        ChatAgent
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ChatAgent">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--responsibilities" class="md-nav__link">
    <span class="md-ellipsis">
      
        Responsibilities
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--attributes" class="md-nav__link">
    <span class="md-ellipsis">
      
        Attributes
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Methods
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#aloegraph.V2.agent.v2_chat_agent.ChatAgent--example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>V2 chat agent</h1>

<div class="doc doc-object doc-module">



<a id="aloegraph.V2.agent.v2_chat_agent"></a>
    <div class="doc doc-contents first">

        <h2 id="aloegraph.V2.agent.v2_chat_agent--v2_chat_agent">v2_chat_agent</h2>
<ul>
<li><strong>Module:</strong> <code>src/aloegraph/V2/agent/v2_chat_agent.py</code></li>
<li><strong>GitHub:</strong> <a href="https://github.com/aloecraft/AloeGraph">https://github.com/aloecraft/AloeGraph</a></li>
<li><strong>Author:</strong> AloeCraft.org (Michael Godfrey)</li>
</ul>
<p>Graph implementation of the Chat Agent in AloeGraph V2.</p>
<p>This module defines <code>ChatAgent</code>, the orchestrator of full chat workflows.
It integrates the Intake Agent (triage) and Router Agent (task routing),
manages conversation state, and ensures that user and agent messages are
logged and delivered consistently.</p>
<h3 id="aloegraph.V2.agent.v2_chat_agent--overview">Overview</h3>
<ul>
<li><strong>ChatAgent</strong>:</li>
<li>Entry point for chat workflows (<code>invoke_intake</code>).</li>
<li>Decides whether to respond directly or route requests downstream.</li>
<li>Invokes Router Agent when routing is required.</li>
<li>Pushes agent messages to the chat log and notifies replies.</li>
<li>Supports auto‑resume for multi‑turn routing workflows.</li>
</ul>
<h3 id="aloegraph.V2.agent.v2_chat_agent--integration">Integration</h3>
<ul>
<li>Works in tandem with:<ul>
<li><code>ChatAgentState</code> — holds intake, routing, and chat log state.</li>
<li><code>IntakeAgent</code> — triages user messages.</li>
<li><code>RouterAgent</code> — routes task‑oriented requests.</li>
<li><code>ChatNotifier</code> — delivers agent replies externally.</li>
</ul>
</li>
<li>Serves as the top‑level agent graph coordinating intake and routing.</li>
</ul>
<h3 id="aloegraph.V2.agent.v2_chat_agent--mermaid-diagram">Mermaid Diagram</h3>
<pre><code class="language-mermaid">flowchart TD
    U[User Message] --&gt; I[invoke_intake]
    I --&gt;|should_route=True| R[invoke_route]
    I --&gt;|should_route=False| CM[chat_message]
    R --&gt; CM
    CM --&gt; AR[auto_resume]
    AR --&gt;|resume=True| R
    AR --&gt;|resume=False| End[END]
</code></pre>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="aloegraph.V2.agent.v2_chat_agent.ChatAgent" class="doc doc-heading">
              <code class="highlight language-python"><span class="n">ChatAgent</span><span class="p">(</span><span class="n">initial_state</span><span class="p">,</span> <span class="n">intake_agent</span><span class="p">,</span> <span class="n">router_agent</span><span class="p">,</span> <span class="n">reply_notifier</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><a class="autorefs autorefs-internal" title="V2AloeGraph(initial_state=None, log_notifier=None) (aloegraph.V2.v2_aloe_graph.V2AloeGraph)" href="../../v2_aloe_graph/#aloegraph.V2.v2_aloe_graph.V2AloeGraph">V2AloeGraph</a>[<a class="autorefs autorefs-internal" title="ChatAgentState (aloegraph.V2.agent.v2_chat_model.ChatAgentState)" href="../v2_chat_model/#aloegraph.V2.agent.v2_chat_model.ChatAgentState">ChatAgentState</a>]</code>, <code><a class="autorefs autorefs-internal" title="ChatAgent (aloegraph.V2.v2_base_model.ChatAgent)" href="../../v2_base_model/#aloegraph.V2.v2_base_model.ChatAgent">ChatAgent</a></code></p>



        <p>Chat agent graph for AloeGraph V2.</p>
<p><code>ChatAgent</code> extends <code>V2AloeGraph</code> and <code>ChatAgent</code> base functionality to
orchestrate full chat workflows. It integrates the Intake Agent and
Router Agent, manages conversation state, and ensures that user and
agent messages are logged and delivered consistently.</p>
<h4 id="aloegraph.V2.agent.v2_chat_agent.ChatAgent--responsibilities">Responsibilities</h4>
<ul>
<li>Define graph nodes for the chat workflow:<ul>
<li><code>invoke_intake</code> — entry node; pushes user message, invokes Intake Agent,
  and decides whether to route or reply directly.</li>
<li><code>invoke_route</code> — invokes the Router Agent when routing is required.</li>
<li><code>chat_message</code> — pushes agent message to the chat log and notifies reply.</li>
<li><code>auto_resume</code> — decides whether to resume routing or end the workflow.</li>
</ul>
</li>
<li>Manage conversation state (<code>ChatAgentState</code>) including intake and routing
  sub‑states.</li>
<li>Integrate with <code>ChatNotifier</code> to deliver agent replies externally.</li>
<li>Validate dependencies and compile sub‑agents via <code>preflight</code>.</li>
</ul>
<h4 id="aloegraph.V2.agent.v2_chat_agent.ChatAgent--attributes">Attributes</h4>
<p>state : ChatAgentState
    Current chat state, including intake, routing, and chat log.
intake_agent : IntakeAgent
    Sub‑agent responsible for triage decisions.
router_agent : RouterAgent
    Sub‑agent responsible for routing task‑oriented requests.
reply_notifier : ChatNotifier
    Notifier used to deliver agent replies to external systems.</p>
<h4 id="aloegraph.V2.agent.v2_chat_agent.ChatAgent--methods">Methods</h4>
<p>invoke_intake(state) -&gt; ChatAgentState
    Entry node; processes user message, invokes Intake Agent, and sets edge.
invoke_route(state) -&gt; ChatAgentState
    Invokes Router Agent and updates agent message.
chat_message(state) -&gt; ChatAgentState
    Pushes agent message to chat log and notifies reply.
auto_resume(state) -&gt; ChatAgentState
    Decides whether to resume routing or end workflow.
preflight() -&gt; bool
    Validates dependencies and compiles sub‑agents if needed.
compile(reply_notifier, graph_name) -&gt; None
    Compiles the chat agent graph with notifier and name.
notify(msg) -&gt; str
    Sends a user message into the workflow and invokes the graph.
set_dialog(dialog) -&gt; None
    Not implemented; use <code>ChatNotifier</code> instead.</p>
<h4 id="aloegraph.V2.agent.v2_chat_agent.ChatAgent--example">Example</h4>
<pre><code class="language-python">from aloegraph.V2.agent.v2_chat_model import ChatAgentState
from aloegraph.V2.agent.v2_intake_agent import IntakeAgent
from aloegraph.V2.agent.v2_router_agent import RouterAgent
from aloegraph.V2.v2_base_model import ChatNotifier

initial_state = ChatAgentState()
intake = IntakeAgent(initial_state.intake_agent_state, response_generator)
router = RouterAgent(initial_state.router_agent_state, response_generator)
notifier = ChatNotifier()

agent = ChatAgent(initial_state, intake, router, notifier)
agent.compile(reply_notifier=notifier, graph_name=&quot;chat_agent&quot;)

agent.notify(&quot;Hello, what can you do?&quot;)
</code></pre>








                  <details class="mkdocstrings-source">
                    <summary>Source code in <code>src/aloegraph/V2/agent/v2_chat_agent.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
             <span class="n">initial_state</span><span class="p">:</span> <span class="n">v2_chat_model</span><span class="o">.</span><span class="n">ChatAgentState</span><span class="p">,</span>
             <span class="n">intake_agent</span><span class="p">:</span> <span class="n">v2_intake_agent</span><span class="o">.</span><span class="n">IntakeAgent</span><span class="p">,</span>
             <span class="n">router_agent</span><span class="p">:</span> <span class="n">v2_router_agent</span><span class="o">.</span><span class="n">RouterAgent</span><span class="p">,</span>
             <span class="n">reply_notifier</span><span class="p">:</span> <span class="n">v2_base_model</span><span class="o">.</span><span class="n">ChatNotifier</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">initial_state</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">intake_agent</span> <span class="o">=</span> <span class="n">intake_agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">router_agent</span> <span class="o">=</span> <span class="n">router_agent</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reply_notifier</span> <span class="o">=</span> <span class="n">reply_notifier</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">












  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../../../..", "features": ["navigation.instant", "navigation.sections", "search.suggest", "search.highlight"], "search": "../../../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  </body>
</html>